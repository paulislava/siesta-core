## Запуск и разработка

Для того чтобы запустить приложение в dev среде достаточно:
1.  скопировать файл настроек backend `config.example.yaml` в `config.yaml`, и вписать в него недостающие поля,
    следуя комментариям
2.  [необязательно] скопировать .env.example в .env и переопределить настройки по-умолчанию для ресурсов
3.  Запустить `docker-compose up`

Можно приступать к разработке: все вносимые изменения будут автоматически подхвачены, скомпилированы и развернуты на
портах backend (по-умолчанию 3000) и frontend (по-умолчанию 4000). Для отладки backend проброшен inspect порт
(по-умолчанию 9229)

## Структура веток

Проект разрабатывается в соответствии с gitlab flow:
*   `release` - содержит текущую стабильную версию, работающую в production
*   `master` - содержит текущую разрабатываемую версию ПО. Код в этой ветке всегда должен собираться и запускаться без
    проблем, однако может содержать непойманные ошибки и баги
*   `epic/<epic-name>` - ветки, в которых ведется разработка крупных задач, состоящих из нескольких более мелких. Ветку
    можно рассматривать, как временный `master`, создаваемый для того, чтобы не препятствовать работе над другими
    задачами. Так же как и в `master`, изменения в нее включаются через Merge Request, и всегда должны собираться и
    запускаться.
*   `feature/<description>[-id]` - ветки, где разрабатываются небольшие задачи, которые затем будут влиты в
    `master` или `epic/*` через merge request. Если у задачи есть номер, он указывается в конце называния ветки
*   `bugfix/<description>[-id]` - ветки, где исправляются ошибки _не_ требующие срочного релиза
*   `hotfix/<description>[-id]` - ветки, где исправляются ошибки, требующие срочного релиза. Эти ветки заливаются прямо
    в `release` и параллельно в master.
*   `refactor/<description>` - ветки, где ведется рефакторинг кода: т.е. изменение его структуры не с целью решения
    задач для пользователей, а с целью улучшения качества самого кода

Названия веток следует записывать в kebab-case

## Структура репозитория

Корневая папка репозитория содержит базовые настройки ts и линтеров, используемые во всех пакетах репозитория. Здесь
же описаны dev зависимости общие для всех пакетов в репозитории. Контейнер `root` обеспечивает правильную установку
всех зависимостей во всех пакетах с использованием кэша.

Папки в каталоге `packages` содержат остальные пакет репозитория.  Продуктовые зависимости каждого пакета описываются
непосредственно в нем, и не должны выноситься в корневой каталог. Это же касается и уникальных dev зависимостей, и их
настроечных файлов.

## Внутреннее API

Для того чтобы описать интерфейсы для внутреннего взаимодействие (например между backend и frontend), используется
пакет shared. Он может содержать любой разделяемый код, но в первую голову должен описывать данные передаваемые между
компонентами и сервисы, предоставляемые друг-другу.

Например, для того чтобы описать сервис позволяющий получить текущего пользователя, следует определить интерфейс для
данных, для сервиса и для путей по которым он доступен:

```ts
export interface AnonymousError {
  reason: string;
}

export interface UserInfo {
  username: string;

  name: string;
}

export interface UserAPI {
  me(...omitted: any[]): Promise<UserInfo>
}

export const USER_ROUTES: APIRoutes<UserAPI> =  {
  me: () => `/auth/me`
};
```

Затем backend реализует `UserAPI` в контроллере, а frontend - в сервисе. Обе эти реализации отвечают за то, чтобы
обеспечить корректную транспортировку, как ответов так и ошибок между частями приложения, так чтобы остальные его части
были абстрагированы от транспортного протокола.

## Стандарт именования файлов

Файлы в проекте следует называть в kebab-case. Если файл декларирует что-то стандартного типа, то этот тип следует
указать в названии файла, отделив точкой.

Например:
*   файл, который декларирует тип `APIRoutes` должен называться _api-routes.ts_
*   файл, определяющий `UserInfoController` (стандартный контроллер в backend) должен называться
    _user-info.controller.ts_

Из имени файла должно быть ясно его содержимое, поэтому не стоит использовать стандартные и повторяющиеся имена файлов,
такие как ~~index.ts~~ ~~styles.scss~~ и т.д.
